(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{1033:(e,s,t)=>{Promise.resolve().then(t.bind(t,3071))},2138:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3071:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var r=t(5155),a=t(6874),n=t.n(a),l=t(5695),i=t(2115),d=t(7168),c=t(8482),o=t(5196),m=t(5690),x=t(4616),h=t(9946);let u=(0,h.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),f=(0,h.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var p=t(2138),j=t(4416),g=t(2085),v=t(3999);let N=(0,g.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",success:"border-transparent bg-green-100 text-green-800 hover:bg-green-200",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function b(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,v.cn)(N({variant:t}),s),...a})}let y=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:(0,v.cn)("w-full caption-bottom text-sm",t),...a})})});y.displayName="Table";let w=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("thead",{ref:s,className:(0,v.cn)("[&_tr]:border-b",t),...a})});w.displayName="TableHeader";let k=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tbody",{ref:s,className:(0,v.cn)("[&_tr:last-child]:border-0",t),...a})});k.displayName="TableBody",i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tfoot",{ref:s,className:(0,v.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a})}).displayName="TableFooter";let R=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tr",{ref:s,className:(0,v.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})});R.displayName="TableRow";let S=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("th",{ref:s,className:(0,v.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a})});S.displayName="TableHead";let T=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("td",{ref:s,className:(0,v.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a})});function C(){return(0,r.jsx)(i.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(A,{})})}function A(){let e=(0,l.useSearchParams)();(0,l.useRouter)();let s=e.get("id"),t="new"===s,[a,h]=(0,i.useState)([]),[g,v]=(0,i.useState)(!0),[N,C]=(0,i.useState)(""),[A,E]=(0,i.useState)([]),[I,P]=(0,i.useState)(!1),[z,M]=(0,i.useState)(null),[B,$]=(0,i.useState)({}),[D,F]=(0,i.useState)(null),[L,Z]=(0,i.useState)(!1),[_,O]=(0,i.useState)("");function W(e){var s,t;return e.done||(null===(s=e.future)||void 0===s?void 0:s.done)?"Completed":(null===(t=e.future)||void 0===t?void 0:t.completedExceptionally)?"Failed":"Running"}function U(e){return e?new Date(1e3*e).toLocaleString():"-"}function V(e,s){if(!e||!s)return"-";let t=Math.round(s-e);if(t<60)return"".concat(t,"s");let r=Math.floor(t/60);return"".concat(r,"m ").concat(t%60,"s")}return((0,i.useEffect)(()=>{s||(v(!0),C(""),fetch("http://localhost:8080/v1/run").then(e=>{if(!e.ok)throw Error("Lucille Unavailable");return e.json()}).then(e=>{console.log("Fetched runs:",e),h(Array.isArray(e)?e:[])}).catch(e=>{e instanceof TypeError&&"Failed to fetch"===e.message||e instanceof Error&&"Lucille Unavailable"===e.message?C("Lucille API unavailable. Please check your server connection."):(C(e instanceof Error?e.message:JSON.stringify(e)),console.error("Unexpected error fetching runs:",e))}).finally(()=>v(!1)))},[s]),(0,i.useEffect)(()=>{t&&(P(!0),M(null),fetch("http://localhost:8080/v1/config",{cache:"no-store"}).then(e=>{if(!e.ok)throw Error("Failed to load configs");return e.json()}).then(e=>E(Object.keys(e||{}).map(e=>({id:e})))).catch(e=>M("Error loading configs")).finally(()=>P(!1)))},[t]),(0,i.useEffect)(()=>{s&&!t&&(Z(!0),O(""),fetch("http://localhost:8080/v1/run/".concat(s)).then(e=>{if(!e.ok)throw Error("Run not found");return e.json()}).then(e=>F(e)).catch(e=>O(e instanceof Error?e.message:"Unknown error")).finally(()=>Z(!1)))},[s,t]),s&&!t)?L?(0,r.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Loading run..."}):_?(0,r.jsx)("div",{className:"p-8 text-center text-red-500",children:_}):D?(0,r.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsx)(d.$,{variant:"ghost",size:"icon",asChild:!0,className:"self-start",children:(0,r.jsx)(n(),{href:"/runs",children:"Back"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Run Details"})]}),(0,r.jsxs)(c.Zp,{className:"mb-6",children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{children:"Run Info"})}),(0,r.jsx)(c.Wu,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Run ID:"})," ",D.runId]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Config:"})," ",D.configId]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Status:"})," ",D.done?"Completed":"In Progress"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Start Time:"})," ",U(D.startTime)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"End Time:"})," ",U(D.endTime)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Duration:"})," ",V(D.startTime,D.endTime)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Type:"})," ",D.runType]})]})})]})]}):null:t?I?(0,r.jsx)("div",{className:"text-center py-8",children:"Loading configurations..."}):z?(0,r.jsx)("div",{className:"text-red-600 text-center py-8",children:z}):(0,r.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-1 sm:mb-2 text-primary-800",children:"Start New Run"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a configuration to start a new run"})]}),(0,r.jsx)(d.$,{variant:"ghost",size:"icon",asChild:!0,className:"self-start",children:(0,r.jsx)(n(),{href:"/runs",children:"Back to Runs"})})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{children:"Configurations"})}),(0,r.jsx)(c.Wu,{children:(0,r.jsxs)(y,{children:[(0,r.jsx)(w,{children:(0,r.jsxs)(R,{children:[(0,r.jsx)(S,{children:"Name"}),(0,r.jsx)(S,{className:"text-right",children:"Action"})]})}),(0,r.jsx)(k,{children:0===A.length?(0,r.jsx)(R,{children:(0,r.jsx)(T,{colSpan:2,className:"text-center",children:"No configurations found"})}):A.map(e=>(0,r.jsxs)(R,{children:[(0,r.jsx)(T,{className:"font-medium",children:e.id}),(0,r.jsx)(T,{className:"text-right",children:(0,r.jsx)(d.$,{variant:"ghost",size:"icon",disabled:"loading"===B[e.id],onClick:()=>{var s;return s=e.id,void($(e=>({...e,[s]:"loading"})),fetch("http://localhost:8080/v1/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({configId:s})}).then(e=>{if(!e.ok)throw Error("Failed to start run");return e.json()}).then(()=>{$(e=>({...e,[s]:"started"})),setTimeout(()=>$(e=>({...e,[s]:"idle"})),4e3)}).catch(()=>$(e=>({...e,[s]:"idle"}))))},children:"started"===B[e.id]?(0,r.jsx)(o.A,{className:"h-4 w-4 text-green-500"}):(0,r.jsx)(m.A,{className:"h-4 w-4"})})})]},e.id))})]})})]})]}):g?(0,r.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Loading runs..."}):N?(0,r.jsx)("div",{className:"p-8 text-center text-red-500",children:N}):(0,r.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-1 sm:mb-2 text-primary-800",children:"Runs"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Monitor and manage pipeline executions"})]}),(0,r.jsx)(d.$,{className:"w-full sm:w-auto bg-primary-600 hover:bg-primary-700",asChild:!0,children:(0,r.jsxs)(n(),{href:"/runs?id=new",children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Start New Run"]})})]}),(0,r.jsx)("div",{className:"hidden md:block mb-6",children:(0,r.jsx)(c.Zp,{className:"border shadow-sm",children:(0,r.jsx)(c.Wu,{className:"p-0",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b bg-muted/50",children:[(0,r.jsx)("th",{className:"p-3 sm:p-4 text-left",children:"Run ID"}),(0,r.jsx)("th",{className:"p-3 sm:p-4 text-left",children:"Config"}),(0,r.jsx)("th",{className:"p-3 sm:p-4 text-left",children:"Status"}),(0,r.jsx)("th",{className:"p-3 sm:p-4 text-left",children:"Start"}),(0,r.jsx)("th",{className:"p-3 sm:p-4 text-left",children:"End"}),(0,r.jsx)("th",{className:"p-3 sm:p-4 text-left",children:"Duration"}),(0,r.jsx)("th",{className:"p-3 sm:p-4 text-right",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:a.map(e=>(0,r.jsxs)("tr",{className:"border-b last:border-0",children:[(0,r.jsx)("td",{className:"p-3 sm:p-4 font-medium",children:(0,r.jsx)(n(),{href:"/runs?id=".concat(e.runId),children:e.runId})}),(0,r.jsx)("td",{className:"p-3 sm:p-4",children:e.configId}),(0,r.jsx)("td",{className:"p-3 sm:p-4",children:(0,r.jsx)(b,{variant:"Completed"===W(e)?"success":"Running"===W(e)?"secondary":"destructive",className:"text-[10px] px-1.5 py-0.5 capitalize",children:W(e)})}),(0,r.jsx)("td",{className:"p-3 sm:p-4",children:U(e.startTime)}),(0,r.jsx)("td",{className:"p-3 sm:p-4",children:U(e.endTime)}),(0,r.jsx)("td",{className:"p-3 sm:p-4",children:V(e.startTime,e.endTime)}),(0,r.jsx)("td",{className:"p-3 sm:p-4 text-right",children:(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,r.jsx)(d.$,{size:"sm",variant:"ghost",className:"h-8 px-2 text-xs text-primary-600",asChild:!0,children:(0,r.jsx)(n(),{href:"/runs?id=".concat(e.runId),children:"View"})}),"Running"===W(e)&&(0,r.jsx)(d.$,{size:"sm",variant:"destructive",className:"h-8 px-2 text-xs",children:"Stop"})]})})]},e.runId))})]})})})})}),(0,r.jsx)("div",{className:"md:hidden space-y-3 mb-6",children:a.map(e=>(0,r.jsxs)(c.Zp,{className:"border shadow-sm overflow-hidden",children:[(0,r.jsx)(c.aR,{className:"p-3 pb-0",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"space-y-1 w-2/3",children:[(0,r.jsx)(n(),{href:"/runs?id=".concat(e.runId),className:"inline-block",children:(0,r.jsx)(c.ZB,{className:"text-sm font-medium text-primary-600 hover:underline truncate",children:e.runId})}),(0,r.jsx)(c.BT,{className:"text-xs truncate",children:e.configId})]}),(0,r.jsx)(b,{variant:"Completed"===W(e)?"success":"Running"===W(e)?"secondary":"destructive",className:"text-[10px] px-1.5 py-0.5 capitalize",children:W(e)})]})}),(0,r.jsxs)(c.Wu,{className:"p-3 pt-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u,{className:"mr-1.5 h-3 w-3 text-muted-foreground flex-shrink-0"}),(0,r.jsx)("span",{className:"truncate",children:U(e.startTime)})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(f,{className:"mr-1.5 h-3 w-3 text-muted-foreground flex-shrink-0"}),(0,r.jsx)("span",{children:V(e.startTime,e.endTime)})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,r.jsx)(d.$,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs text-primary-600 -ml-2",asChild:!0,children:(0,r.jsxs)(n(),{href:"/runs?id=".concat(e.runId),children:["View Details ",(0,r.jsx)(p.A,{className:"ml-1 h-3 w-3"})]})}),"Running"===W(e)&&(0,r.jsxs)(d.$,{size:"sm",variant:"destructive",className:"h-7 px-2 text-xs",children:[(0,r.jsx)(j.A,{className:"mr-1 h-3 w-3"})," Stop"]})]})]})]},e.runId))}),(0,r.jsx)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:(0,r.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground order-2 sm:order-1 text-center sm:text-left",children:["Showing ",a.length," of ",a.length," runs"]})})]})}T.displayName="TableCell",i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("caption",{ref:s,className:(0,v.cn)("mt-4 text-sm text-muted-foreground",t),...a})}).displayName="TableCaption"},3999:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var r=t(2596),a=t(9688);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}},4416:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4616:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5196:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5690:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},7168:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var r=t(5155),a=t(2115),n=t(9708),l=t(2085),i=t(3999);let d=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,size:l,asChild:c=!1,...o}=e,m=c?n.DX:"button";return(0,r.jsx)(m,{className:(0,i.cn)(d({variant:a,size:l,className:t})),ref:s,...o})});c.displayName="Button"},8482:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>i,wL:()=>m});var r=t(5155),a=t(2115),n=t(3999);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});l.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent";let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})});m.displayName="CardFooter"}},e=>{var s=s=>e(e.s=s);e.O(0,[201,411,441,684,358],()=>s(1033)),_N_E=e.O()}]);