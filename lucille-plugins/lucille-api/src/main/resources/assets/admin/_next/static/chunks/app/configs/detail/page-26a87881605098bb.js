(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[854],{3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(2596),n=s(9688);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,a.$)(t))}},5196:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5690:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(5155),n=s(2115),r=s(9708),i=s(2085),l=s(3999);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:c=!1,...d}=e,u=c?r.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:s})),ref:t,...d})});c.displayName="Button"},7863:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),n=s(6874),r=s.n(n),i=s(7168),l=s(8482),o=s(9946);let c=(0,o.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var d=s(5196);let u=(0,o.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var m=s(5690);function f(e){let{value:t,onChange:s}=e;return(0,a.jsx)("textarea",{className:"w-full min-h-[200px] max-h-[70vh] p-4 font-mono text-sm bg-gray-50 focus:outline-none border-0 rounded-none",style:{boxSizing:"border-box",lineHeight:"1.5",resize:"vertical"},value:t,onChange:e=>s(e.target.value),spellCheck:!1,rows:Math.max(10,t.split("\n").length)})}var h=s(2115),x=s(5695);function p(){return(0,a.jsx)(h.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(g,{})})}function g(){var e;let t=(0,x.useSearchParams)(),s=(0,x.useRouter)(),n=null!==(e=null==t?void 0:t.get("id"))&&void 0!==e?e:"new",o="new"===n,[p,g]=(0,h.useState)(""),[v,j]=(0,h.useState)(!1),[y,b]=(0,h.useState)(!1),[N,w]=(0,h.useState)(!1),[C,k]=(0,h.useState)(!1),[S,R]=(0,h.useState)(""),[P,A]=(0,h.useState)(!1),[T,E]=(0,h.useState)(!1),[M,z]=(0,h.useState)(null),[B,F]=(0,h.useState)(!0);async function I(){try{j(!0),b(!1);let e=await fetch("http://localhost:8080/v1/config",{method:"POST",headers:{"Content-Type":"application/json"},body:p}),t=await e.json();if(!e.ok)throw Error("Failed to save config");o&&t.configId&&s.replace("/configs/detail?id=".concat(t.configId)),b(!0),setTimeout(()=>{b(!1)},2e3)}catch(e){console.error("Error saving config:",e)}finally{j(!1)}}async function O(){if(o){R("Please save configuration before running");return}w(!0),k(!1),R("");try{let e=await fetch("http://localhost:8080/v1/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({configId:n})});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to start run")}k(!0),setTimeout(()=>k(!1),2e3)}catch(e){console.error("Run error:",e),R(e instanceof Error?e.message:"Failed to start run")}finally{w(!1)}}return(0,h.useEffect)(()=>{let e=!0;async function t(){F(!0),E(!1);try{let t=await fetch("http://localhost:8080/v1/run"),s=await t.json();e&&z(Array.isArray(s)?s.filter(e=>e.configId===n):[])}catch(t){console.warn("Failed to fetch runs",t),e&&(E(!0),z([]))}finally{e&&F(!1)}}return o||t(),()=>{e=!1}},[n,o]),(0,h.useEffect)(()=>{(async function(){if(o)g('{\n  "connectors": [\n    {\n      "class": "com.example.FileConnector",\n      "path": "/data/input",\n      "name": "file-connector",\n      "pipeline": "main-pipeline"\n    }\n  ],\n  "pipelines": [\n    {\n      "name": "main-pipeline",\n      "stages": [\n        {\n          "name": "parse",\n          "class": "com.example.JsonParser"\n        },\n        {\n          "name": "transform",\n          "class": "com.example.DataTransformer"\n        }\n      ]\n    }\n  ],\n  "indexer": {\n    "type": "elasticsearch",\n    "url": "http://localhost:9200",\n    "index": "my-index",\n    "batchSize": 1000\n  }\n}');else try{let e=await fetch("http://localhost:8080/v1/config/".concat(n));if(!e.ok)throw Error("Failed to fetch config");let t=await e.json();g(JSON.stringify(t,null,2))}catch(e){console.error("Config fetch error:",e),A(!0)}})()},[n,o]),(0,a.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-8 w-8",asChild:!0,children:(0,a.jsx)(r(),{href:"/configs",children:(0,a.jsx)(c,{className:"h-4 w-4"})})}),(0,a.jsx)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-0 text-primary-800",children:o?"New Configuration":"Config: ".concat(n)})]})}),P?(0,a.jsx)("div",{className:"rounded-md bg-red-50 p-4 mb-6",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Config not found"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,a.jsx)("p",{children:"The configuration could not be loaded. Please try again or return to the config list."})})]})})}):(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-[1fr_340px]",children:[(0,a.jsx)(l.Zp,{className:"border shadow-sm overflow-hidden",children:(0,a.jsx)(l.Wu,{className:"p-0",children:(0,a.jsx)(f,{value:p,onChange:g})})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(l.Zp,{className:"border shadow-sm",children:[(0,a.jsxs)(l.aR,{className:"py-3 sm:py-4",children:[(0,a.jsx)(l.ZB,{className:"text-base sm:text-lg",children:"Actions"}),(0,a.jsx)(l.BT,{className:"text-xs sm:text-sm",children:"Operations for this configuration"})]}),(0,a.jsxs)(l.Wu,{className:"space-y-3 sm:space-y-4",children:[(0,a.jsxs)(i.$,{className:"w-full justify-start text-sm h-9 ".concat(y?"bg-green-600 hover:bg-green-700":""),onClick:I,disabled:v,variant:"default",children:[v?(0,a.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):y?(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}):(0,a.jsx)(u,{className:"mr-2 h-4 w-4 flex-shrink-0"}),v?"Saving...":y?"Saved!":"Save Configuration"]}),(0,a.jsxs)(i.$,{className:"w-full justify-start text-sm h-9 ".concat(N?"opacity-70":""),variant:"secondary",onClick:O,disabled:N,children:[N?(0,a.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):C?(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}):(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}),N?"Running...":C?"Run Started":"Run Configuration"]}),S&&(0,a.jsx)("div",{className:"text-xs text-red-500",children:S}),(0,a.jsx)(i.$,{className:"w-full justify-start text-sm h-9",variant:"outline",asChild:!0,children:(0,a.jsx)(r(),{href:"/configs",children:"Back to Configs"})})]})]}),!o&&(0,a.jsxs)(l.Zp,{className:"border shadow-sm",children:[(0,a.jsxs)(l.aR,{className:"py-3 sm:py-4",children:[(0,a.jsx)(l.ZB,{className:"text-base sm:text-lg",children:"Recent Runs"}),(0,a.jsx)(l.BT,{className:"text-xs sm:text-sm",children:"Latest executions"})]}),(0,a.jsxs)(l.Wu,{className:"space-y-3",children:[B?(0,a.jsx)("div",{children:"Loading..."}):T?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Lucille Unavailable"}):M&&M.length>0?M.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex items-center justify-between border-b pb-3 last:border-0 last:pb-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-sm",children:["Run ID: ",e.runId]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:function(e){let t=Date.now()/1e3-e;return t<60?"".concat(Math.floor(t),"s ago"):t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):"".concat(Math.floor(t/86400),"d ago")}(null!==(t=e.startTime)&&void 0!==t?t:0)})]}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ".concat(e.done?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.done?"COMPLETED":"RUNNING"})})]},e.runId)}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No runs found"}),(0,a.jsx)(i.$,{variant:"ghost",size:"sm",className:"w-full text-xs sm:text-sm h-8",asChild:!0,children:(0,a.jsx)(r(),{href:"/runs?configId=".concat(n),children:"View All Runs"})})]})]})]})]})]})}},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>u});var a=s(5155),n=s(2115),r=s(3999);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...n})});u.displayName="CardFooter"},9662:(e,t,s)=>{Promise.resolve().then(s.bind(s,7863))}},e=>{var t=t=>e(e.s=t);e.O(0,[201,411,441,684,358],()=>t(9662)),_N_E=e.O()}]);