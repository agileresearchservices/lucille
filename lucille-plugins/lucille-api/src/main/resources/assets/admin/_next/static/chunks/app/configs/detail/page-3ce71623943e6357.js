(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[854],{3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(2596),n=s(9688);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,a.$)(t))}},5196:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5690:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(5155),n=s(2115),r=s(9708),i=s(2085),o=s(3999);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:c=!1,...d}=e,u=c?r.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:n,size:i,className:s})),ref:t,...d})});c.displayName="Button"},7863:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),n=s(6874),r=s.n(n),i=s(7168),o=s(8482),l=s(9946);let c=(0,l.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var d=s(5196);let u=(0,l.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var f=s(5690);function m(e){let{value:t,onChange:s}=e;return(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)("div",{className:"border rounded-md",children:(0,a.jsx)("textarea",{className:"w-full h-[500px] p-4 font-mono text-sm bg-muted/50 rounded-md focus:outline-none",value:t,onChange:e=>s(e.target.value)})})})}var h=s(2115),x=s(5695);function p(){return(0,a.jsx)(h.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(g,{})})}function g(){let e=(0,x.useSearchParams)(),t=(0,x.useRouter)(),s=(null==e?void 0:e.get("id"))||"new",n="new"===s,[l,p]=(0,h.useState)(""),[g,v]=(0,h.useState)(!1),[j,y]=(0,h.useState)(!1),[N,b]=(0,h.useState)(!1),[w,C]=(0,h.useState)(!1),[k,S]=(0,h.useState)(""),[R,P]=(0,h.useState)(!1),[A,T]=(0,h.useState)(!1),[E,M]=(0,h.useState)(null),[B,F]=(0,h.useState)(!0);async function O(){try{v(!0),y(!1);let e=await fetch("http://localhost:8080/v1/config",{method:"POST",headers:{"Content-Type":"application/json"},body:l}),s=await e.json();if(!e.ok)throw Error("Failed to save config");n&&s.configId&&t.replace("/configs/detail?id=".concat(s.configId)),y(!0),setTimeout(()=>{y(!1)},2e3)}catch(e){console.error("Error saving config:",e)}finally{v(!1)}}async function z(){if(n){S("Please save configuration before running");return}b(!0),C(!1),S("");try{let e=await fetch("http://localhost:8080/v1/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({configId:s})});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to start run")}C(!0),setTimeout(()=>C(!1),2e3)}catch(e){console.error("Run error:",e),S(e instanceof Error?e.message:"Failed to start run")}finally{b(!1)}}return(0,h.useEffect)(()=>{let e=!0;async function t(){F(!0),T(!1);try{let t=await fetch("http://localhost:8080/v1/run"),a=await t.json();e&&M(Array.isArray(a)?a.filter(e=>e.configId===s):[])}catch(t){console.warn("Failed to fetch runs",t),e&&(T(!0),M([]))}finally{e&&F(!1)}}return n||t(),()=>{e=!1}},[s,n]),(0,h.useEffect)(()=>{(async function(){if(n)p('{\n  "connectors": [\n    {\n      "class": "com.example.FileConnector",\n      "path": "/data/input",\n      "name": "file-connector",\n      "pipeline": "main-pipeline"\n    }\n  ],\n  "pipelines": [\n    {\n      "name": "main-pipeline",\n      "stages": [\n        {\n          "name": "parse",\n          "class": "com.example.JsonParser"\n        },\n        {\n          "name": "transform",\n          "class": "com.example.DataTransformer"\n        }\n      ]\n    }\n  ],\n  "indexer": {\n    "type": "elasticsearch",\n    "url": "http://localhost:9200",\n    "index": "my-index",\n    "batchSize": 1000\n  }\n}');else try{let e=await fetch("http://localhost:8080/v1/config/".concat(s));if(!e.ok)throw Error("Failed to fetch config");let t=await e.json();p(JSON.stringify(t,null,2))}catch(e){console.error("Config fetch error:",e),P(!0)}})()},[s,n]),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center",children:[(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"mr-2 h-8 w-8",asChild:!0,children:(0,a.jsx)(r(),{href:"/configs",children:(0,a.jsx)(c,{className:"h-4 w-4"})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold",children:n?"New Configuration":"Config: ".concat(s)})]}),R?(0,a.jsx)("div",{className:"rounded-md bg-red-50 p-4 mb-6",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Config not found"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,a.jsx)("p",{children:"The configuration could not be loaded. Please try again or return to the config list."})})]})})}):(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-[1fr_300px]",children:[(0,a.jsx)(o.Zp,{className:"overflow-hidden",children:(0,a.jsx)("div",{className:"h-[600px] overflow-auto",children:(0,a.jsx)(m,{value:l,onChange:p})})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{className:"py-3 sm:py-4",children:[(0,a.jsx)(o.ZB,{className:"text-base sm:text-lg",children:"Actions"}),(0,a.jsx)(o.BT,{className:"text-xs sm:text-sm",children:"Operations for this configuration"})]}),(0,a.jsxs)(o.Wu,{className:"space-y-3 sm:space-y-4",children:[(0,a.jsxs)(i.$,{className:"w-full justify-start text-sm h-9 ".concat(j?"bg-green-600 hover:bg-green-700":""),onClick:O,disabled:g,variant:"default",children:[g?(0,a.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):j?(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}):(0,a.jsx)(u,{className:"mr-2 h-4 w-4 flex-shrink-0"}),g?"Saving...":j?"Saved!":"Save Configuration"]}),(0,a.jsxs)(i.$,{className:"w-full justify-start text-sm h-9 ".concat(N?"opacity-70":""),variant:"secondary",onClick:z,disabled:N,children:[N?(0,a.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):w?(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}):(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4 flex-shrink-0"}),N?"Running...":w?"Run Started":"Run Configuration"]}),k&&(0,a.jsx)("div",{className:"text-xs text-red-500",children:k}),(0,a.jsx)(i.$,{className:"w-full justify-start text-sm h-9",variant:"outline",asChild:!0,children:(0,a.jsx)(r(),{href:"/configs",children:"Back to Configs"})})]})]}),!n&&(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{className:"py-3 sm:py-4",children:[(0,a.jsx)(o.ZB,{className:"text-base sm:text-lg",children:"Recent Runs"}),(0,a.jsx)(o.BT,{className:"text-xs sm:text-sm",children:"Latest executions"})]}),(0,a.jsxs)(o.Wu,{className:"space-y-3",children:[B?(0,a.jsx)("div",{children:"Loading..."}):A?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Lucille Unavailable"}):E&&E.length>0?E.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between border-b pb-3 last:border-0 last:pb-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-sm",children:["Run ID: ",e.runId]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:function(e){let t=Date.now()/1e3-e;return t<60?"".concat(Math.floor(t),"s ago"):t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):"".concat(Math.floor(t/86400),"d ago")}(e.startTime)})]}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ".concat(e.done?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.done?"COMPLETED":"RUNNING"})})]},e.runId)):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No runs found"}),(0,a.jsx)(i.$,{variant:"ghost",size:"sm",className:"w-full text-xs sm:text-sm h-8",asChild:!0,children:(0,a.jsx)(r(),{href:"http://localhost:8080/v1/run",children:"View All Runs"})})]})]})]})]})]})}},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>o,wL:()=>u});var a=s(5155),n=s(2115),r=s(3999);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});l.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...n})});u.displayName="CardFooter"},9662:(e,t,s)=>{Promise.resolve().then(s.bind(s,7863))}},e=>{var t=t=>e(e.s=t);e.O(0,[201,411,441,684,358],()=>t(9662)),_N_E=e.O()}]);